# talkingrock.ai

## Mission

Center your data around you, not a data center, so that your attention is centered on what you value. Local, zero trust AI. Small models and footprint, outsized impact and trust.

## Vision

AI that partners with you and your values, not to automate you. Intent always verified, permission always requested, all learning reviewable, editable, and auditable.

---

## Site Architecture

Every technical decision on this site echoes the mission and vision. We do not collect what we do not need. We do not route through intermediaries we cannot justify. We tell you exactly where your data goes. Trust is earned, not assumed.

### Guiding Principles

1. **No cookies.** If you don't track, you don't need to ask permission to track. The absence of a cookie banner is the message.
2. **No third-party trackers.** No Google Analytics, no Meta Pixel, no ad networks, no retargeting. Your visit is yours.
3. **Minimal external dependencies.** Every dependency is a trust decision. Every external script is a third party the visitor didn't consent to.
4. **Transparency by default.** This repository is public. Anyone can verify that the site does what we claim.
5. **Analytics for diagnostics, not surveillance.** We measure what we need to keep the site healthy. We do not mine attention.

---

## Stack

### Static Site — Hugo

The site is a static site generated by [Hugo](https://gohugo.io/). No server-side processing, no database, no session state. The server delivers files. That's it.

**Why Hugo:** Fast, single binary, no runtime dependencies, enormous theme ecosystem, Markdown-native content authoring. Builds in milliseconds. The simplest thing that works.

### Hosting & CDN — Cloudflare Pages

The site is deployed on [Cloudflare Pages](https://pages.cloudflare.com/) with Cloudflare's CDN and DDoS protection.

**Why Cloudflare:** Zero trust network architecture. Industry-standard TLS termination. The internet already routes through Cloudflare whether we choose it or not — they are infrastructure at this point. Pages provides free hosting for static sites with automatic deployments from Git. No origin server to maintain, no infrastructure to patch.

**Cloudflare configuration:**
- Cloudflare Analytics (privacy-first, no cookies, no client-side JS) is enabled as a secondary signal but is not our primary analytics solution.
- Email obfuscation and bot protection enabled.
- No Cloudflare Web Analytics JS snippet — we use our own beacon (see below).
- Caching headers set for static assets; HTML served fresh.

### Domain & TLS

- **Domain:** talkingrock.ai
- **Registrar:** [TBD — evaluate Cloudflare Registrar, Njalla, or Porkbun for privacy posture]
- **TLS:** Managed by Cloudflare. Full (Strict) mode. HSTS enabled.

### Authentication — Self-Hosted

The demo requires login. Login exists to gate the demo experience and capture leads from people genuinely interested in CAIRN. It does not exist to build a surveillance profile.

**Approach:** Cloudflare Pages Functions (serverless, edge-executed) handling a simple magic link flow:

1. User enters email address.
2. Server generates a one-time token, stores it in Cloudflare KV (TTL: 15 minutes).
3. Email sent via transactional email provider (evaluate [Resend](https://resend.com/) or [Postmark](https://postmarkapp.com/)).
4. User clicks link, token validated, short-lived session cookie issued (HttpOnly, Secure, SameSite=Strict, 24-hour expiry).
5. Session cookie is the **only** cookie on the entire site. It exists solely to maintain demo session state.

**What we store:** Email address, timestamp of signup, number of demo sessions. Nothing else.

**What we tell the user:** Exactly the above. Displayed clearly on the login page before they enter their email. No pre-checked newsletter boxes. No "we may share with partners." No dark patterns.

**Future consideration:** Evaluate [Authentik](https://goauthentik.io/) or [Zitadel](https://zitadel.com/) if authentication needs grow beyond magic link.

### Demo Backend — HuggingFace Spaces + ZeroGPU

The CAIRN demo runs on [HuggingFace Spaces](https://huggingface.co/spaces) using ZeroGPU for dynamic GPU allocation.

**Why ZeroGPU:** Allocates NVIDIA H200 GPU on demand, releases when inference completes. Cost-effective for a demo with variable traffic. HuggingFace PRO ($9/month) provides 25 minutes of daily H200 compute and up to 10 ZeroGPU Spaces.

**Architecture:**

```
talkingrock.ai (static frontend)
    │
    ├── Landing page (mission, vision, tagline)
    ├── Login gate (magic link auth)
    └── Demo UI (custom frontend)
            │
            └── API calls ──→ HuggingFace Space (Gradio backend)
                                    │
                                    ├── Dummy calendar (pre-loaded week)
                                    ├── Dummy email inbox (read/unread signals)
                                    ├── Drag reordering capture
                                    └── @spaces.GPU decorated inference
                                            │
                                            └── Small model (Phi-3 / Qwen-2 / Mistral-7B)
                                                    │
                                                    └── Lesson distillation → consent prompt
```

**Frontend-backend separation:** The talkingrock.ai frontend is a custom UI (HTML/CSS/JS served from Cloudflare Pages). It calls the HuggingFace Space via Gradio's API client. This gives us full design control over the demo experience while HuggingFace handles inference compute.

**Transparency disclosure:** The demo page includes a visible note:

> *This demo runs on HuggingFace infrastructure so you can try CAIRN today. The production product runs entirely on your machine. We eat our own cooking — we're just not done cooking yet.*

### Analytics — Homegrown Beacon (Pulse)

We built our own. It's called **Pulse**.

Pulse is a lightweight, cookieless analytics beacon designed for diagnostics and optimization, not attention mining. It answers the questions "is the site working" and "where do people get stuck" without answering "who are these people and how do we follow them."

**What Pulse collects:**

| Signal | Purpose | Justification |
|---|---|---|
| Page path | Know which pages are visited | Optimize content, find dead pages |
| Referrer (domain only, not full URL) | Know where traffic comes from | Measure if outreach is working |
| Timestamp | Know when traffic arrives | Capacity planning, identify outages |
| Viewport width (bucketed: mobile/tablet/desktop) | Know what devices people use | Responsive design decisions |
| Country (derived from Cloudflare `CF-IPCountry` header, not IP logging) | Know rough geographic distribution | Localization decisions, CDN optimization |
| Page load time (Performance API) | Know if the site is fast | Performance optimization |
| Demo funnel events (login started, demo launched, lesson proposed, lesson accepted/rejected) | Know if the demo works | Product development |

**What Pulse does NOT collect:**

- IP addresses (never logged, never stored)
- Cookies or persistent identifiers of any kind
- Browser fingerprints (no canvas, no WebGL, no font enumeration)
- User agent strings (no device/OS/browser tracking)
- Scroll depth or mouse movement
- Full referrer URLs (domain only — we don't need to know what page someone was reading)
- Any cross-session identification (every pageview is anonymous and unlinked)
- Any data sold, shared, or made available to third parties, ever

**Implementation:**

```javascript
// pulse.js — the entire analytics client
(function() {
  const endpoint = '/api/pulse';
  const vw = window.innerWidth;
  const bucket = vw < 768 ? 'mobile' : vw < 1024 ? 'tablet' : 'desktop';
  const perf = performance.getEntriesByType('navigation')[0];
  
  fetch(endpoint, {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({
      path: location.pathname,
      referrer: document.referrer ? new URL(document.referrer).hostname : null,
      viewport: bucket,
      loadTime: perf ? Math.round(perf.loadEventEnd - perf.startTime) : null,
      timestamp: new Date().toISOString()
    }),
    keepalive: true
  }).catch(() => {});
})();
```

**Backend:** Cloudflare Pages Function at `/api/pulse` that appends the event (plus the `CF-IPCountry` header value) to a Cloudflare D1 database (SQLite at the edge). Country is derived server-side from Cloudflare's geolocation header — no IP is logged or stored.

**Dashboard:** A simple, password-protected `/admin/pulse` page that queries D1 and renders charts. Built with basic HTML and Chart.js. No external dashboard service.

**Retention:** Raw events retained for 90 days, then aggregated to daily summaries and purged. Aggregates retained for 1 year.

**Open source:** Pulse ships as part of this repository. Anyone can read the source and verify the collection boundaries.

---

## Content Structure

```
talkingrock.ai/
├── /                    Landing page (mission, vision, tagline, demo CTA)
├── /cairn               CAIRN product page
├── /demo                Demo experience (auth-gated)
├── /about               Company story, philosophy
├── /privacy             Privacy policy (plain language, no legalese)
├── /transparency        What we collect, why, how to verify
└── /blog                Updates, thinking, Kel's voice
```

### Privacy Page

The privacy policy is written in plain language. No legalese, no "we may share with trusted partners," no 4,000-word documents designed to exhaust you into acceptance. The page states:

- Exactly what data we collect (the Pulse table above, reproduced verbatim)
- Exactly what data we do not collect (the exclusion list above, reproduced verbatim)
- That the demo runs on HuggingFace infrastructure (with link to their privacy policy)
- That authentication stores email and session data (with exact fields listed)
- That no data is sold, shared, or made available to third parties
- That the site source code is public for verification
- Contact information for questions

### Transparency Page

A dedicated page explaining every third-party dependency on the site, why it exists, and what data flows through it:

| Dependency | What it does | What data it sees | Why we chose it |
|---|---|---|---|
| Cloudflare | CDN, DDoS protection, DNS, hosting | IP addresses (for routing, not logged by us), request metadata | Industry standard zero trust infrastructure |
| HuggingFace | Demo inference compute | Demo interaction data during active session | GPU compute for small model inference; disclosed on demo page |
| Transactional email provider | Sends magic link emails | Email address | Required for passwordless auth; no marketing use |

---

## Development

### Prerequisites

- Hugo (extended edition) >= 0.120
- Node.js >= 18 (for asset pipeline if needed)
- Wrangler CLI (Cloudflare Pages Functions local dev)

### Local Development

```bash
git clone https://github.com/talkingrock/talkingrock.ai.git
cd talkingrock.ai
hugo server --bind 0.0.0.0 --baseURL http://localhost:1313
```

### Deployment

Push to `main` triggers automatic deployment via Cloudflare Pages.

### Environment Variables

| Variable | Purpose | Where |
|---|---|---|
| `PULSE_DB` | D1 database binding for analytics | Cloudflare Pages |
| `AUTH_KV` | KV namespace for auth tokens | Cloudflare Pages |
| `EMAIL_API_KEY` | Transactional email provider key | Cloudflare Pages (secret) |
| `HF_SPACE_URL` | HuggingFace Space endpoint for demo | Cloudflare Pages |

---

## What This Site Is

This site is the first product. Before anyone touches CAIRN, the website itself demonstrates the philosophy. Every layer is built to deserve trust, not to claim it.

No cookies. No trackers. No dark patterns. No intermediaries we can't justify. Open source. Plain language. Diagnostics only.

This is what "center your data around you" looks like when applied to a website.

---

## License

Site source code: MIT  
CAIRN product: [TBD]  
Pulse analytics beacon: MIT
